<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Architecture - AI Companion Documentation</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>AI Companion</h1>
            <p class="subtitle">Technical Architecture</p>
        </div>
    </header>
    
    <nav>
        <div class="container">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="#components">Core Components</a></li>
                <li><a href="#duality">Duality Model</a></li>
                <li><a href="#memory">Memory System</a></li>
                <li><a href="#integration">Integration Architecture</a></li>
                <li><a href="#security">Security Architecture</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="container">
        <section id="introduction" class="section">
            <h2>Introduction</h2>
            <p>The AI Companion implements a sophisticated technical architecture that supports its relational purpose through modular components, secure data handling, and ethical integration. This architecture is designed to enable meaningful connection, user sovereignty, and ethical interaction while maintaining high performance and security standards.</p>
            
            <div class="image-container">
                <img src="../images/project_structure_diagram.png" alt="AI Companion Architecture Diagram" class="full-width-image">
            </div>
        </section>
        
        <section id="components" class="section">
            <h2>Core Components</h2>
            
            <h3>Primary System Architecture</h3>
            <p>The AI Companion is built around a modular architecture with the following core components:</p>
            
            <ul>
                <li><strong>Duality Model</strong>
                    <ul>
                        <li>Mirror: Inward-focused engine for deep user understanding</li>
                        <li>Bridge: Outward-facing engine for external connections</li>
                        <li>Synthesis: Dynamic interplay layer managing Mirror↔Bridge flow</li>
                    </ul>
                </li>
                <li><strong>Supporting Systems</strong>
                    <ul>
                        <li>Memory System: Relational database for continuity and patterns</li>
                        <li>RitualEngine: Personalized ritual curation and delivery</li>
                        <li>MCPClientInterface: Discovery backbone for external connections</li>
                        <li>Voice Engine: Adaptive communication system</li>
                        <li>Breath System: UI/UX pacing mechanism</li>
                        <li>Ethics Engine: Ethical guardrails and consent management</li>
                    </ul>
                </li>
            </ul>
            
            <h3>Component Relationships</h3>
            <p>These components interact through well-defined interfaces with clear separation of concerns:</p>
            
            <ul>
                <li>The Mirror and Bridge components operate independently but are coordinated by the Synthesis layer</li>
                <li>The Memory System provides persistent storage and retrieval for all other components</li>
                <li>The Ethics Engine applies ethical guardrails across all interactions and data processing</li>
                <li>The Voice and Breath systems provide synchronized pacing for the user experience</li>
                <li>The RitualEngine orchestrates complex interaction flows across multiple components</li>
            </ul>
        </section>
        
        <section id="duality" class="section">
            <h2>Duality Model Architecture</h2>
            
            <h3>Mirror Component</h3>
            <p>The Mirror component is the inward-focused engine that creates a reflective space for deep user understanding:</p>
            
            <ul>
                <li><strong>Input Processor</strong>: Handles text/voice input and prepares for analysis</li>
                <li><strong>Emotional Sensing Engine</strong>: Detects and analyzes emotional content</li>
                <li><strong>Pattern Recognition System</strong>: Identifies recurring patterns and themes</li>
                <li><strong>Need Detector</strong>: Maps emotional states to needs framework</li>
                <li><strong>Archetype Modeler</strong>: Identifies and tracks user archetypes</li>
                <li><strong>Reflection Generator</strong>: Creates meaningful reflections based on insights</li>
            </ul>
            
            <h3>Bridge Component</h3>
            <p>The Bridge component is the outward-facing engine that connects users to relevant external resources:</p>
            
            <ul>
                <li><strong>MCPClientInterface</strong>: Discovery backbone for external connections</li>
                <li><strong>TruthFilter</strong>: Ensures honest, relevant external signals</li>
                <li><strong>Content Curator</strong>: Selects and organizes external content</li>
                <li><strong>Perspective Generator</strong>: Creates alternative viewpoints</li>
                <li><strong>Framing Engine</strong>: Contextualizes content for personal relevance</li>
                <li><strong>Connection Finder</strong>: Identifies potential external connections</li>
            </ul>
            
            <h3>Synthesis Component</h3>
            <p>The Synthesis component manages the dynamic interplay between Mirror and Bridge:</p>
            
            <ul>
                <li><strong>State Manager</strong>: Tracks current user emotional state and context</li>
                <li><strong>Transition Controller</strong>: Manages Mirror↔Bridge transitions</li>
                <li><strong>Ethics Checker</strong>: Applies ethical guardrails to all interactions</li>
                <li><strong>JoyOptimizer</strong>: Balances needs with joy metrics</li>
                <li><strong>Decision Engine</strong>: Determines appropriate next actions</li>
                <li><strong>Experience Coordinator</strong>: Creates unified experience across components</li>
            </ul>
        </section>
        
        <section id="memory" class="section">
            <h2>Memory System Architecture</h2>
            
            <h3>Memory Components</h3>
            <p>The Memory System provides persistent storage and pattern recognition:</p>
            
            <ul>
                <li><strong>Echo Detector</strong>: Identifies recurring patterns</li>
                <li><strong>Storyline Manager</strong>: Tracks narrative threads</li>
                <li><strong>Marker System</strong>: Creates and manages significant moments</li>
                <li><strong>Memory Vault</strong>: Secure storage for sensitive memories</li>
                <li><strong>Memory Graph</strong>: Relational database structure</li>
                <li><strong>Forgetting Ritual Manager</strong>: Handles memory deletion processes</li>
            </ul>
            
            <h3>Data Models</h3>
            <p>The system implements several key data models:</p>
            
            <ul>
                <li><strong>User Profile</strong>: Stores user archetypes, needs, preferences, and consent settings</li>
                <li><strong>Memory Graph</strong>: Implements nodes (markers, echoes, storylines) and edges (relationships)</li>
                <li><strong>Ritual Template</strong>: Defines structure for personalized ritual experiences</li>
            </ul>
            
            <h3>Database Architecture</h3>
            <p>The system uses a multi-database approach for different data types:</p>
            
            <ul>
                <li><strong>Document Store (MongoDB)</strong>: User profiles, ritual templates, voice packs</li>
                <li><strong>Graph Database (Neo4j)</strong>: Memory graph, relationship mapping, pattern networks</li>
                <li><strong>Encrypted Storage (Custom)</strong>: Memory Vault contents, sensitive user data</li>
            </ul>
        </section>
        
        <section id="integration" class="section">
            <h2>Integration Architecture</h2>
            
            <h3>Component Integration</h3>
            <p>The components are integrated through a well-defined architecture with clear integration points:</p>
            
            <ul>
                <li><strong>Mirror-Memory Integration</strong>: For storing and retrieving reflections and patterns</li>
                <li><strong>Bridge-Memory Integration</strong>: For contextualizing external content based on history</li>
                <li><strong>Mirror-Ethics Integration</strong>: For applying ethical guardrails to reflections</li>
                <li><strong>Bridge-Ethics Integration</strong>: For filtering external content based on ethical criteria</li>
                <li><strong>Voice-Synthesis Integration</strong>: For adapting communication style based on context</li>
                <li><strong>Breath-Ritual Integration</strong>: For pacing ritual experiences with breath awareness</li>
            </ul>
            
            <h3>API Architecture</h3>
            <p>The system implements a comprehensive API architecture:</p>
            
            <ul>
                <li><strong>Internal APIs</strong>: RESTful interfaces between components</li>
                <li><strong>External APIs</strong>: Secure interfaces for MCPClientInterface</li>
                <li><strong>Event Bus</strong>: Pub/sub system for cross-component communication</li>
                <li><strong>WebSocket API</strong>: Real-time communication for interactive features</li>
            </ul>
            
            <h3>Data Flow Architecture</h3>
            <p>The system implements a privacy-focused data flow architecture:</p>
            
            <ul>
                <li><strong>Local Processing Layer</strong>: Handles sensitive data processing</li>
                <li><strong>Secure Storage Layer</strong>: Manages encrypted memory storage</li>
                <li><strong>External Connection Layer</strong>: Handles Bridge content retrieval</li>
            </ul>
        </section>
        
        <section id="security" class="section">
            <h2>Security Architecture</h2>
            
            <h3>Authentication & Authorization</h3>
            <p>The system implements robust security controls:</p>
            
            <ul>
                <li><strong>User Authentication</strong>: Secure identity verification</li>
                <li><strong>Role-Based Access Control</strong>: Granular permission management</li>
                <li><strong>Session Management</strong>: Secure session handling with timeouts</li>
                <li><strong>OAuth Integration</strong>: Support for third-party authentication</li>
            </ul>
            
            <h3>Data Protection</h3>
            <p>The system prioritizes data security:</p>
            
            <ul>
                <li><strong>End-to-End Encryption</strong>: For sensitive data transmission</li>
                <li><strong>At-Rest Encryption</strong>: For stored data protection</li>
                <li><strong>Local-First Processing</strong>: For privacy-sensitive operations</li>
                <li><strong>Secure Key Management</strong>: For encryption key protection</li>
            </ul>
            
            <h3>Deployment Architecture</h3>
            <p>The AI Companion supports multiple deployment models:</p>
            
            <ul>
                <li><strong>Local-First Model</strong>: Core processing on user device</li>
                <li><strong>Hybrid Model</strong>: Local processing with cloud services</li>
                <li><strong>Cloud Model (Optional)</strong>: Encrypted cloud storage with user keys</li>
            </ul>
        </section>
        
        <section id="conclusion" class="section">
            <h2>Conclusion</h2>
            <p>The AI Companion's technical architecture provides a robust foundation for creating a relational AI system that balances sophisticated functionality with strong security and privacy protections. The modular design with clear separation of concerns enables independent development and testing of components while ensuring they work together seamlessly through well-defined integration points.</p>
            
            <p>The architecture's emphasis on local-first processing, encrypted storage, and ethical integration reflects the system's commitment to user sovereignty and privacy by design. This approach creates a technical foundation that aligns with and supports the system's conceptual and ethical frameworks.</p>
            
            <div class="text-center">
                <a href="../downloads/technical_architecture_analysis.md" class="btn">Download Technical Architecture Analysis (Markdown)</a>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 AI Companion Documentation</p>
        </div>
    </footer>
    
    <script src="../script.js"></script>
</body>
</html>
